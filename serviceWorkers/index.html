<!DOCTYPE html>
<html lang="en">

<h1>Service Worker Test</h1>
<output id="output"></output>

<button onclick="update()">Update Check</button>

<script>
function update() {
    navigator.serviceWorker.getRegistration()
    .then(registration => {
        registration.update();
    });
}

if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register("serviceworker.js", 
            { scope: "serviceWorkers" })
            .then( registration => {
                const scope = registration.scope;
                document.querySelector("#output").innerHTML = 
                `Service Worker Registered Properly at ${scope}`;
            })
            .catch(error => {
                document.querySelector("#output").innerHTML = 
                "Service Worker Failed to Register";
            });
} else {
    document.querySelector("#output").innerHTML =
    "Service Worker Not Available";
}

 if ('serviceWorker' in navigator) {
    navigator.serviceWorker.getRegistration()
        .then( registration => {
            registration.addEventListener("updatefound", event => {
            const swInstalling = registration.installing;
            swInstalling.addEventListener("statechange", () => {
            if (swInstalling.state=='installed') {
                document.querySelector("#output").innerHTML = "Service Worker Installed";
            } else {
                document.querySelector("#output").innerHTML = "Service Worker Updated";
            }
            });
            });
        })
        .catch(error => {
        console.log("Service Worker Failed to Get Registration", error);
        });
}

        </script>

</body>
    
</html>